<?xml version="1.0"?>
<root main_tree_to_execute="BehaviorTree">
    <!-- ////////// -->
    <BehaviorTree ID="BehaviorTree">
        <ReactiveSequence>
            <Fallback>
                <ReactiveSequence>
                    <SetBlackboard output_key="minimum_battery_voltage" value="40"/>
                    <SetBlackboard output_key="hovering_point" value="6.0; 6.0; 1.50;0.0"/>
                    <SetBlackboard output_key="docking_point" value="6.0; 6.0; 0.30;0.0"/>
                    <SetBlackboard output_key="task_a" value="0.0; 0.0; 3.0;0.0"/>
                    <SetBlackboard output_key="task_b" value="3.0; 3.0; 3.0;0.0"/>
                    <Fallback>
                        <Action ID="CheckBattery" minimum_battery_voltage="{minimum_battery_voltage}"/>
                        <Sequence>
                            <SubTree ID="HoverRobot" target="hovering_point"/>
                            <SubTree ID="LandRobot" target="docking_point"/>
                        </Sequence>
                    </Fallback>
                    <Fallback>
                    <Inverter>
                        <Action ID="CheckBattery" minimum_battery_voltage="{minimum_battery_voltage}"/>
                    </Inverter>
                    <Action ID="MoveUAV" goal="{task_a}"/>
                    <Action ID="MoveUAV" goal="{task_b}"/>

                    </Fallback>

                </ReactiveSequence>
            </Fallback>
        </ReactiveSequence>
    </BehaviorTree>
    <!-- ////////// -->
    <BehaviorTree ID="LandRobot">
        <Action ID="LandUAV" goal="{target}"/>
    </BehaviorTree>
    <!-- ////////// -->
    <BehaviorTree ID="HoverRobot">
        <Action ID="HoverUAV" goal="{target}"/>
    </BehaviorTree>
    <!-- ////////// -->
    <TreeNodesModel>
        <Condition ID="BatteryLOW"/>
        <Action ID="CheckBattery">
            <input_port default="10" name="minimum_battery_voltage"/>
        </Action>
        <SubTree ID="LandRobot">
            <input_port name="target"/>
        </SubTree>
        <Action ID="LandUAV">
            <input_port name="goal"/>
        </Action>
        <SubTree ID="HoverRobot">
            <input_port name="target"/>
        </SubTree>
        <Action ID="HoverUAV">
            <input_port name="goal"/>
        </Action>
        <Action ID="MoveUAV">
            <input_port name="goal"/>
        </Action>
    </TreeNodesModel>
    <!-- ////////// -->
</root>
